// Auto-generated by case_mapping_generator.h
// DO NOT EDIT MANUALLY

#ifndef WCTYPE_CASE_MAPPING_H
#define WCTYPE_CASE_MAPPING_H

#include <stdint.h>
#include <wctype.h>

struct CaseMapping {
  uint32_t from;
  uint32_t to;
};

inline constexpr CaseMapping to_upper_table[1450] = {
#include "wctype_case_mapping_upper.inc"
};

inline constexpr CaseMapping to_lower_table[1433] = {
#include "wctype_case_mapping_lower.inc"
};

inline const CaseMapping *find_mapping(const CaseMapping *table, size_t size,
                                       uint32_t codepoint) {
  size_t left = 0;
  size_t right = size;

  while (left < right) {
    size_t mid = left + (right - left) / 2;
    if (table[mid].from == codepoint) {
      return &table[mid];
    } else if (table[mid].from < codepoint) {
      left = mid + 1;
    } else {
      right = mid;
    }
  }
  return nullptr;
}

inline wint_t towupper_impl(wint_t wc) {
  if (wc == WEOF) {
    return WEOF;
  }

  // Out of valid Unicode range
  if (wc < 0 || wc > 0x10FFFF || (wc >= 0xD800 && wc <= 0xDFFF)) {
    return wc;
  }

  const CaseMapping *mapping =
      find_mapping(to_upper_table, 1450, wc);

  return mapping ? mapping->to : wc;
}

inline wint_t towlower_impl(wint_t wc) {
  if (wc == WEOF) {
    return WEOF;
  }

  // Out of valid Unicode range
  if (wc < 0 || wc > 0x10FFFF || (wc >= 0xD800 && wc <= 0xDFFF)) {
    return wc;
  }

  const CaseMapping *mapping =
      find_mapping(to_lower_table, 1433, wc);

  return mapping ? mapping->to : wc;
}

#endif // WCTYPE_CASE_MAPPING_H
